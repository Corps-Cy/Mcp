# 需求文档：压缩包批量处理器

## 1. 简介

本项目旨在开发一个 MCP 工具，该工具能够接收一个 ZIP 压缩包，并对其内部的每个文件进行批量 OCR 处理。它将利用项目中已有的多语言 OCR 功能，并将所有文件的处理结果汇总成一个结构化的 JSON 数组返回。

## 2. 需求列表

### 2.1 核心工具接口

*   **用户故事:** 作为一个需要处理大量文档的用户，我希望能调用一个工具接口，一次性上传一个 ZIP 压缩包，并获取其中所有可识别文档的 OCR 结果。
*   **验收标准:**
    1.  **当** 客户端调用 `ProcessZipArchive` 工具并提供一个包含有效 ZIP 文件的 `OcrInput` 对象时，
        **则** 系统应返回一个包含每个文件处理结果的 JSON 格式的数组字符串。
    2.  **当** 提供的文件不是一个有效的 ZIP 压缩包时，
        **则** 系统应返回一个明确的“文件格式错误”信息。

### 2.2 压缩包处理逻辑

*   **用户故事:** 作为一个开发者，我希望工具能智能地处理压缩包内的各种文件，只识别支持的格式，并清晰地标示出其他文件的状态。
*   **验收标准:**
    1.  **当** 工具解压 ZIP 包时，它必须能遍历其中所有文件，包括子目录中的文件。
    2.  **当** 遍历到图片文件（.png, .jpg, .jpeg, .bmp, .gif）或 PDF 文件（.pdf）时，
        **则** 系统必须调用内部的通用 OCR 功能对该文件进行识别。
    3.  **当** 遍历到任何其他不支持的文件类型时，
        **则** 系统必须跳过该文件，并在最终结果中将其状态标记为 `Skipped_Unsupported_Type`。
    4.  **当** 压缩包为空时，
        **则** 系统应返回一个空的 JSON 数组 `[]`。

### 2.3 结构化输出

*   **用户故事:** 作为一个调用者，我需要一个格式统一、信息清晰的 JSON 数组，以便我能轻松地遍历处理结果，了解每个文件的识别内容和状态。
*   **验收标准:**
    1.  **当** 工具返回结果时，最外层必须是一个 JSON 数组。
    2.  **当** 文件被成功处理时，
        **则** 数组中对应的 JSON 对象必须包含 `fileName` (字符串), `status` (值为 "Processed"), `text` (字符串), 和 `word_coordinates` (对象数组)。
    3.  **当** 文件被跳过时，
        **则** 数组中对应的 JSON 对象必须包含 `fileName` (字符串), `status` (值为 "Skipped_Unsupported_Type"), 并且 `text` 和 `word_coordinates` 的值应为 `null`。
    4.  **当** 某个文件在 OCR 过程中失败时，
        **则** 数组中对应的 JSON 对象状态应标记为 `Failed`，并包含一个 `error` 字段说明失败原因。
